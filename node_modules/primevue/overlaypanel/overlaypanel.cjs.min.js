"use strict";var e=require("primevue/focustrap"),t=require("primevue/icons/times"),n=require("primevue/overlayeventbus"),i=require("primevue/portal"),r=require("primevue/ripple"),o=require("primevue/utils"),s=require("primevue/basecomponent"),l=require("primevue/overlaypanel/style"),a=require("vue");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=c(e),d=c(t),f=c(n),h=c(i),p=c(r),v={name:"OverlayPanel",extends:{name:"BaseOverlayPanel",extends:c(s).default,props:{dismissable:{type:Boolean,default:!0},showCloseIcon:{type:Boolean,default:!1},appendTo:{type:String,default:"body"},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},breakpoints:{type:Object,default:null},closeIcon:{type:String,default:void 0}},style:c(l).default,provide:function(){return{$parentInstance:this}}},inheritAttrs:!1,emits:["show","hide"],data:function(){return{visible:!1}},watch:{dismissable:{immediate:!0,handler:function(e){e?this.bindOutsideClickListener():this.unbindOutsideClickListener()}}},selfClick:!1,target:null,eventTarget:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,styleElement:null,overlayEventListener:null,beforeUnmount:function(){this.dismissable&&this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.destroyStyle(),this.unbindResizeListener(),this.target=null,this.container&&this.autoZIndex&&o.ZIndexUtils.clear(this.container),this.overlayEventListener&&(f.default.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null),this.container=null},mounted:function(){this.breakpoints&&this.createStyle()},methods:{toggle:function(e,t){this.visible?this.hide():this.show(e,t)},show:function(e,t){this.visible=!0,this.eventTarget=e.currentTarget,this.target=t||e.currentTarget},hide:function(){this.visible=!1},onContentClick:function(){this.selfClick=!0},onEnter:function(e){var t=this;this.container.setAttribute(this.attributeSelector,""),o.DomHandler.addStyles(e,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),this.dismissable&&this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.autoZIndex&&o.ZIndexUtils.set("overlay",e,this.baseZIndex+this.$primevue.config.zIndex.overlay),this.overlayEventListener=function(e){t.container.contains(e.target)&&(t.selfClick=!0)},this.focus(),f.default.on("overlay-click",this.overlayEventListener),this.$emit("show")},onLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),f.default.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null,this.$emit("hide")},onAfterLeave:function(e){this.autoZIndex&&o.ZIndexUtils.clear(e)},alignOverlay:function(){o.DomHandler.absolutePosition(this.container,this.target);var e=o.DomHandler.getOffset(this.container),t=o.DomHandler.getOffset(this.target),n=0;e.left<t.left&&(n=t.left-e.left),this.container.style.setProperty("--overlayArrowLeft","".concat(n,"px")),e.top<t.top&&(this.container.setAttribute("data-p-overlaypanel-flipped","true"),!this.isUnstyled&&o.DomHandler.addClass(this.container,"p-overlaypanel-flipped"))},onContentKeydown:function(e){"Escape"===e.code&&(this.hide(),o.DomHandler.focus(this.target))},onButtonKeydown:function(e){switch(e.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":e.preventDefault()}},focus:function(){var e=this.container.querySelector("[autofocus]");e&&e.focus()},bindOutsideClickListener:function(){var e=this;!this.outsideClickListener&&o.DomHandler.isClient()&&(this.outsideClickListener=function(t){!e.visible||e.selfClick||e.isTargetClicked(t)||(e.visible=!1),e.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new o.ConnectedOverlayScrollHandler(this.target,(function(){e.visible&&(e.visible=!1)}))),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.visible&&!o.DomHandler.isTouchDevice()&&(e.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isTargetClicked:function(e){return this.eventTarget&&(this.eventTarget===e.target||this.eventTarget.contains(e.target))},containerRef:function(e){this.container=e},createStyle:function(){if(!this.styleElement&&!this.isUnstyled){var e;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",o.DomHandler.setAttribute(this.styleElement,"nonce",null===(e=this.$primevue)||void 0===e||null===(e=e.config)||void 0===e||null===(e=e.csp)||void 0===e?void 0:e.nonce),document.head.appendChild(this.styleElement);var t="";for(var n in this.breakpoints)t+="\n                        @media screen and (max-width: ".concat(n,") {\n                            .p-overlaypanel[").concat(this.attributeSelector,"] {\n                                width: ").concat(this.breakpoints[n]," !important;\n                            }\n                        }\n                    ");this.styleElement.innerHTML=t}},destroyStyle:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},onOverlayClick:function(e){f.default.emit("overlay-click",{originalEvent:e,target:this.target})}},computed:{attributeSelector:function(){return o.UniqueComponentId()},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},directives:{focustrap:u.default,ripple:p.default},components:{Portal:h.default,TimesIcon:d.default}};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){var t=C(e,"string");return"symbol"===y(t)?t:String(t)}function C(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var g=["aria-modal"],w=["aria-label"];v.render=function(e,t,n,i,r,o){var s=a.resolveComponent("Portal"),l=a.resolveDirective("ripple"),c=a.resolveDirective("focustrap");return a.openBlock(),a.createBlock(s,{appendTo:e.appendTo},{default:a.withCtx((function(){return[a.createVNode(a.Transition,a.mergeProps({name:"p-overlaypanel",onEnter:o.onEnter,onLeave:o.onLeave,onAfterLeave:o.onAfterLeave},e.ptm("transition")),{default:a.withCtx((function(){return[r.visible?a.withDirectives((a.openBlock(),a.createElementBlock("div",a.mergeProps({key:0,ref:o.containerRef,role:"dialog","aria-modal":r.visible,onClick:t[5]||(t[5]=function(){return o.onOverlayClick&&o.onOverlayClick.apply(o,arguments)}),class:e.cx("root")},b(b({},e.$attrs),e.ptm("root"))),[e.$slots.container?a.renderSlot(e.$slots,"container",{key:0,onClose:o.hide,onKeydown:function(e){return o.onButtonKeydown(e)}}):(a.openBlock(),a.createElementBlock(a.Fragment,{key:1},[a.createElementVNode("div",a.mergeProps({class:e.cx("content"),onClick:t[0]||(t[0]=function(){return o.onContentClick&&o.onContentClick.apply(o,arguments)}),onMousedown:t[1]||(t[1]=function(){return o.onContentClick&&o.onContentClick.apply(o,arguments)}),onKeydown:t[2]||(t[2]=function(){return o.onContentKeydown&&o.onContentKeydown.apply(o,arguments)})},e.ptm("content")),[a.renderSlot(e.$slots,"default")],16),e.showCloseIcon?a.withDirectives((a.openBlock(),a.createElementBlock("button",a.mergeProps({key:0,class:e.cx("closeButton"),"aria-label":o.closeAriaLabel,type:"button",autofocus:"",onClick:t[3]||(t[3]=function(){return o.hide&&o.hide.apply(o,arguments)}),onKeydown:t[4]||(t[4]=function(){return o.onButtonKeydown&&o.onButtonKeydown.apply(o,arguments)})},e.ptm("closeButton")),[a.renderSlot(e.$slots,"closeicon",{},(function(){return[(a.openBlock(),a.createBlock(a.resolveDynamicComponent(e.closeIcon?"span":"TimesIcon"),a.mergeProps({class:[e.cx("closeIcon"),e.closeIcon]},e.ptm("closeIcon")),null,16,["class"]))]}))],16,w)),[[l]]):a.createCommentVNode("",!0)],64))],16,g)),[[c]]):a.createCommentVNode("",!0)]})),_:3},16,["onEnter","onLeave","onAfterLeave"])]})),_:3},8,["appendTo"])},module.exports=v;
